<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Usuarios - Biblioteca da AV Canido</title>
    <link href="../CSS/style.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="../imaxes/av_canido_favicon.png" />
    <script type="module" async src="../JavaScript/copyright-auto.js"></script>
    <script type="module" async src="../JavaScript/pintar-tabla-usuarios.js"></script>
    

    <!--FONTS = Comfortaa | Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300..700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  </head>

  <body>
    <!------------------------------------------------------->
    <!-----------------------   HEADER   -------------------->
    <!------------------------------------------------------->
    <header class="header-xestion">
      <div class="logo-index"><img src="../imaxes/av_canido_logo.png"></div>
      <h2>NOVO USUARIO</h2>
      
    </header>
    <!------------------------------------------------------->
    <!------------------------   MAIN   --------------------->
    <!------------------------------------------------------->
    <section class="pax-inicio-sesion">
      <div class="formulario">
        <form id="form-novo-usuario">
            <div>
            <label>Nome<span class="asterisco"> *</span></label>
            <input id="nome-usuario" type="text" name="Nome_Usuario" required/>
            </div>
            <div>
            <label>1ยบ Apelido<span class="asterisco"> *</span></label>
            <input id="primer-apelido-usuario" type="text" name="Apelido_1_Usuario" required/>
            </div>
            
            <div>
            <label>2ยบ Apelido<span class="asterisco"> *</span></label>
            <input id="segundo-apelido-usuario" type="text" name="Apelido_2_Usuario" required/>
          </div>
            <div>
            <label>DNI<span class="asterisco"> *</span></label>
            <input id="dni-usuario" type="text" name="DNI_Usuario" required/>
          </div>
          <div>
            <label>ROL</label>
            <select id="rol-usuario" name="ROL_Usuario">
              <option>--Sen Rol--</option>
              <option>socio</option>
              <option>administrativo</option>
            </select>
          </div>
            <div class="boton-formulario">
            <button type="submit" class="boton-aceptar-usuario">CONFIRMAR</button>
            <button type="reset" class="boton-cancelar-usuario">CANCELAR</button>
          </div>
          </form>
      </div>
      <p class="detalle-formulario">Aqueles campos cun asterisco (<span class="asterisco">*</span>) indican que o campo e OBLIGATORIO</p>
    </section>
    <hr/>
    <section>
      <h2>LISTA DE USUARIOS</h2>
      <div class="lista-usuarios">
        <table class="tabla-usuarios">
          <theader>
            <th>Nome</th>
            <th>1ยบ Apelido</th>
            <th>2ยบ Apelido</th>
            <th>DNI</th>
            <th>Rol</th>
          </theader>
          <tbody class="body-tabla"></tbody>
        </table>
    </div>
    </section>
    <!------------------------------------------------------->
    <!-----------------------   FOOTER   -------------------->
    <!------------------------------------------------------->
    <footer>
        <p class="copyright"></p>
    </footer>
    
    <script type="module" async>
  
      let botonEnviarUsuario = document.querySelector(".boton-aceptar-usuario");

    let inputNome = document.querySelector("#nome-usuario");
    let inputPrimerApelido = document.querySelector("#primer-apelido-usuario");
    let inputSegundoApelido = document.querySelector("#segundo-apelido-usuario");
    let inputDNI = document.querySelector("#dni-usuario");
    let inputRol = document.querySelector("#rol-usuario");

    let formNovoUsuario = document.querySelector("#form-novo-usuario");
    
    formNovoUsuario.addEventListener("submit", async (e)=>{
      e.preventDefault();
      let datos = new FormData(formNovoUsuario);
      let obxectoDato = {};
      for(let [name,value] of datos){
        console.log(`${name} = ${value}`)
        obxectoDato[`${name}`] = value;
      };
    
      let datoEnviadoJSON = {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(obxectoDato)
    
      }
    let respostaRecibida = await fetch("/insertar-usuarios",datoEnviadoJSON);
    let respostaRecibidaJSON = await respostaRecibida.json(); 
    console.log("respostaRecibidaJSON",respostaRecibidaJSON);
    
    }) 
  </script>
  </body>
</html>